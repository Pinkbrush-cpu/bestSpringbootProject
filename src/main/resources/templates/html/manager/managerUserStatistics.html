<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极简导航 | 用户管理</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Playfair+Display:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/managerUserStatistics.css">
</head>
<body>
<!-- 左侧导航栏 -->
<aside class="sidebar">
    <a th:href="@{/managerInformation}" class="logo" th:text="${username}">PinkBrush</a>
    <ul class="menu">
        <li class="menu-item">
            <a th:href="@{/managerHomepage}" class="menu-link">
                <span class="menu-icon"><i class="fas fa-home"></i></span>
                <span>首页</span>
                <span class="menu-arrow"><i class="fas fa-chevron-right"></i></span>
            </a>
            <ul class="submenu">
                <li><a href="#" class="submenu-link active">概览</a></li>
                <li><a href="#" class="submenu-link">数据分析</a></li>
                <li><a href="#" class="submenu-link">近期活动</a></li>
            </ul>
        </li>
        <li class="menu-item active">
            <a href="#" class="menu-link active">
                <span class="menu-icon"><i class="fas fa-file-alt"></i></span>
                <span>用户</span>
                <span class="menu-arrow"><i class="fas fa-chevron-right"></i></span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/managerModifyPermission}" class="submenu-link">修改权限</a></li>
                <li><a th:href="@{/managerUserStatistics}" class="submenu-link">用户统计</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link">
                <span class="menu-icon"><i class="fas fa-chart-line"></i></span>
                <span>分析</span>
                <span class="menu-arrow"><i class="fas fa-chevron-right"></i></span>
            </a>
            <ul class="submenu">
                <li><a href="#" class="submenu-link">数据统计</a></li>
                <li><a href="#" class="submenu-link">趋势分析</a></li>
                <li><a href="#" class="submenu-link">用户行为</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link">
                <span class="menu-icon"><i class="fas fa-cog"></i></span>
                <span>设置</span>
                <span class="menu-arrow"><i class="fas fa-chevron-right"></i></span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/managerInformation}" class="submenu-link">个人资料</a></li>
                <li><a th:href="@{/managerModifyInformation}" class="submenu-link">编辑资料</a></li>
                <li><a th:href="@{/managerChangePassword}" class="submenu-link">修改密码</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link">
                <span class="menu-icon"><i class="fas fa-users"></i></span>
                <span>团队</span>
                <span class="menu-arrow"><i class="fas fa-chevron-right"></i></span>
            </a>
            <ul class="submenu">
                <li><a href="#" class="submenu-link">成员管理</a></li>
                <li><a href="#" class="submenu-link">权限设置</a></li>
                <li><a href="#" class="submenu-link">团队统计</a></li>
            </ul>
        </li>
    </ul>
</aside>

<!-- 右侧内容 -->
<main class="main-content">
    <div class="decoration decoration-1"></div>
    <div class="decoration decoration-2"></div>

    <div class="content-header">
        <h1 class="welcome-title">用户管理</h1>
        <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="搜索用户..." >
        </div>
    </div>

    <!-- 用户统计卡片 -->
    <div class="stats-container">
        <a th:href="@{/admin/users(identity = 10)}" class="stat-card admin">
            <div class="stat-title">管理员</div>
            <div class="stat-value" th:text="${managerCount}">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up stat-icon"></i>
                <span>与上月持平</span>
            </div>
        </a>

        <a th:href="@{/admin/users(identity = 2)}" class="stat-card teacher">
            <div class="stat-title">教师</div>
            <div class="stat-value" th:text="${teacherCount}">0</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up stat-icon"></i>
                <span>比上月增加 1</span>
            </div>
        </a>

        <a th:href="@{/admin/users(identity = 1)}" class="stat-card user">
            <div class="stat-title">普通用户</div>
            <div class="stat-value" th:text="${userCount}">0</div>
            <div class="stat-change negative">
                <i class="fas fa-arrow-down stat-icon"></i>
                <span>比上月减少 1</span>
            </div>
        </a>
    </div>

    <div class="users-container">
        <div class="users-header">
            <div>用户</div>
            <div>注册时间</div>
            <div>权限</div>
            <div>操作</div>
        </div>

        <!-- 用户列表 -->
        <div th:each="user : ${users}" class="user-row">
            <div class="user-name">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div>
                    <div th:text="${user.username}"></div>
                    <div class="user-email" th:text="${user.email}"></div>
                </div>
            </div>
            <div th:text="${user.phone}"></div>
            <div>
                <!-- 根据用户权限显示不同样式 -->
                <span th:classappend="${user.identity == 10 ? 'user-role admin' : (user.identity == 2 ? 'user-role teacher' : 'user-role student')}"
                      th:text="${user.identity == 10 ? '管理员' : (user.identity == 2 ? '教师' : '学生')}">
                    </span>
            </div>
        </div>
    </div>
</main>
</body>
</html>